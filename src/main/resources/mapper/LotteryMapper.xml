<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.repository.mapper.LotteryMapper">
	<resultMap id="BetLottery" type="com.pojo.entity.LotteryOrder" />

	<insert id="insertBetLottery" useGeneratedKeys="true" keyProperty="id" parameterType="BetLottery">
		INSERT INTO
		LOTTERY_ORDER(
		    ID,
			LOTTERY_ID,
			ISSUE_CODE,
			USER_ID,
			MULTIPLE,
			BET_NUMBER,
			ORDER_TIME,
			RESULT
		) VALUES(
		    #{id},
			#{lotteryId},
			#{issueCode},
			#{userId},
			#{multiple},
			#{betNumber},
			#{orderTime},
			#{result}
		)

	</insert>

	<insert id="insertDrawResult" useGeneratedKeys="true" keyProperty="id" parameterType="DrawResult">
		INSERT INTO
			DRAW_RESULT(
			ID,
			LOTTERY_ID,
			ISSUE_CODE,
			DRAW_NUMBERS,
			SALE_TIME,
			OPEN_DRAW_TIME
		) VALUES(
			#{id},
			#{lotteryId},
			#{issueCode},
			#{drawNumbers},
			#{saleTime},
			#{openDrawTime}
		)

	</insert>


	<update id="updateDrawResult">
		UPDATE DRAW_RESULT
		SET DRAW_NUMBERS = #{drawNumbers},
		    OPEN_DRAW_TIME = now()
		WHERE ISSUE_CODE = #{issueCode}
	</update>


</mapper>